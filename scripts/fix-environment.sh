#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º —Å environment

echo "üîß –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –ø—Ä–æ–±–ª–µ–º—ã —Å environment –¥–ª—è GitHub Pages..."

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –º—ã –≤ git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
if [ ! -d ".git" ]; then
    echo "‚ùå –û—à–∏–±–∫–∞: –≠—Ç–æ –Ω–µ git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π"
    exit 1
fi

echo "üìù –ö–æ–º–º–∏—Ç–∏–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è..."
git add .
git commit -m "Fix GitHub Pages deployment - add environment configuration"

echo "üì§ –ü—É—à–∏–º –∏–∑–º–µ–Ω–µ–Ω–∏—è..."
git push origin main

echo "‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω—ã!"
echo ""
echo "üìã –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:"
echo "  - –î–æ–±–∞–≤–ª–µ–Ω environment: github-pages"
echo "  - –ù–∞—Å—Ç—Ä–æ–µ–Ω URL –¥–ª—è environment"
echo "  - –î–æ–±–∞–≤–ª–µ–Ω id –¥–ª—è deployment step"
echo ""
echo "üîß –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:"
echo "  1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Settings > Environments"
echo "  2. –°–æ–∑–¥–∞–π—Ç–µ environment 'github-pages'"
echo "  3. –†–∞–∑—Ä–µ—à–∏—Ç–µ –≤–µ—Ç–∫—É 'main' –¥–ª—è –¥–µ–ø–ª–æ—è"
echo "  4. –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –¥–µ–ø–ª–æ—è"
echo ""
echo "üåê –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–µ–ø–ª–æ–π:"
echo "  - Actions: https://github.com/$(git config --get remote.origin.url | sed 's/.*github.com[:/]\([^.]*\).*/\1/')/actions"
echo "  - Pages: https://github.com/$(git config --get remote.origin.url | sed 's/.*github.com[:/]\([^.]*\).*/\1/')/settings/pages"
echo ""
echo "‚è≥ –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –¥–µ–ø–ª–æ—è (–æ–±—ã—á–Ω–æ 2-3 –º–∏–Ω—É—Ç—ã)"
